

## 流量分类

- 实时的，低延迟的流量
- 大数据量的，优先吞吐量的流量。因为云计算的兴起，数据中心间进行数据交换。



## SDN

- 现象：
  - 评价：

- 说了这周会吃个饭，结果我一问才知道，奥牙疼，继续问奥，吃不了了。
  - 我得一步一步，哪步没跟上就没答案了。你说话太虚了，没有谱。
- 问个啥是回了一下，然后也就没了，我说十句有一句。
  - 我不知道你现在是为啥这么冷淡，如果是不想说，那你之前我一直找你你也是这个样子。不管是谁都会觉得你没兴趣。然后你这人爱转移话题，模糊问题，模糊答案。
  - 怎么能和你好：1，对方是一个你喜欢的不得了的，你巴不得主动爱。2，对方是个大舔狗，你怎么冷，他还是那么热，可能会感动你吧。

你觉得你给人希望，又让人绝望，对方在这之间徘徊，很好吗。你会说不是你的问题。



### 分层

- 应用层：SDN应用，比如流量控制，网络虚拟化，监控
  - 北向接口
- 控制平台层
  - 南向接口
- 数据平台层



## 云计算

![image-20201119092858430](SDN网络中的流量控制概论.assets/image-20201119092858430.png)





## 流量工程

### 传统



### SDN

SDN提供了：

1. 集中可见性：包括全局网络信息（比如网络资源限制或者动态改变网络状态）和全局应用信息（比如QoS需求）
2. 可编程性：无需处理单个基础设施元素。集中控制器可以对数据平面上的OF交换机进行主动编程和动态可擦写编程，优化分配网络资源，避免网络拥塞，提高QoS性能。
3. 开放性：数据平面元素（交换机），无论供应商是谁，都有一个向控制器开放的统一接口，用于数据平面编程和网络状态收集。
4. OF交换机支持多流表通道：管理流更灵活有效



当前流量工程主要关注四点：

1. 流管理：交换机和路由器的负载均衡、多流表
2. 容错能力：数据平面和控制平面的容错
3. 拓扑更新：策略更新、同步流表项、基于时间的配置
4. 流量分析描述：





## Floodlight

### 架构

![image-20201118200641687](SDN网络中的流量控制概论.assets/image-20201118200641687.png)



#### 主要功能模块

![image-20201118200716180](SDN网络中的流量控制概论.assets/image-20201118200716180.png)







### 部署



进行一系列我看不懂的操作，但是很有用，不能跳过，跳过的话后面网页就会报404

```java
 git pull origin master 
 git submodule init 
 git submodule update 
```



http://localhost:8080/ui/pages/index.html





### 源码

#### ForwardingBase

实现了转发模块的抽象类

主要方法

- receive：处理packet_in类型的OF信息，调用processPacketInMessage去处理信息，返回Command。
- processPacketInMessage（需要实现）：



#### Forwarding

继承ForwardingBase，实现了抽象方法，定义了如何处理PacketIn消息。



## 自己的点

底层支持：

- 带宽预留
  - 流量监控
  - QoS配置
  - 应用流量标记







### 针对带宽调度中的在线和离线问题

**在线算法**：对于输入系统的一个请求，系统会同步计算得出结果。

**离线算法**：对于输入系统的一个请求，系统会积累请求异步批量处理，来达到更好的分配效果，但是舍弃了实时性，请求可能在很久之后才能得到是否能分配或者何时怎么分配的答复。

 

### 周期性调度



#### 离线和在线算法

为了提高流量分配的合理性，提高网络的吞吐量，通过阶段性得批量处理请求，使一次计算中包含更多的信息，也就是周期性调度。这样对用户请求的要求为，传输请求的截至时间必须在当前周期的下一个周期开始之后（这个请求不能在当前周期内去传输数据了）。在这一个周期内部相当于就是离线算法，知道整个涉及的阶段内的所有输入信息（请求信息）。

> 这里有个小问题，如果当前时间为周期n，有一个请求，最早开始时间在周期n内，最晚结束时间在周期n+1内。能不能把一个请求拆分为一个实时调度和一个周期调度。



对于周期性调度的离线算法

#### 后计算路径

对批量请求进行排序，贪心地为每个请求单独找符合地路径，路径和带宽同时分配

- 根据F(请求数据量,请求最早开始时间)，对请求排序
- 按顺序计算每一个请求，网络中是否有满足带宽的路径。VBVP
  - 方案一：对一个请求的带宽要求和时间要求，在每个时隙的网络资源中计算带宽最大的路径。每个时隙的数据量累加，如果满足，就使用最少的时隙数。将网络资源更新后，继续计算下一个请求。
  - **方案二**：为了让请求相互照顾，动态地修改请求地权重。遍历每一个时隙，在时隙t中，根据请求的剩余时间和待传输数据来作为优先级对请求排序。每个时隙都去计算一次得到当前时隙的带宽分配结果，得到当前时隙的分配结果，最终将分配结果合并。
    - 改变请求定义，不设定死的截止时间
- 

#### 缓存路径

先计算出所有节点之间地路径。然后对每个请求在两点之间选择合适地路径并且分配合适地流量。

- 计算出每两个节点之间地多条路径。Yen的k条最短路径。
- 规划每个请求在路径上预留的带宽。
  - 直接规划出每个时隙的每个流的占用带宽，计算规模大
  - 依次规划每个时隙中的每个流的占用带宽，



### 实时调度

应该是尽快进行传输，不受时隙影响直接传输。

#### 需求为数据量

剩下的数据量并入时隙计算。

对于当前时隙，对所有需要传输请求（新请求和旧请求）去计算路径和带宽。随着一个请求计算时隙越来越接近Deadline，它的优先级越大。

每个

### 需求为带宽

直接根据网路资源判断是否能预留请求需要的时间内的带宽。





### 离线和在线结合

选路算法中的离线：根据网络资源数据，去计算每个节点之间的路径信息，放到路径池中等待被直接选择使用。

缺点：可能会导致局部拥塞，网络整体利用率不高。



选路算法中的在线：对于请求实时地计算合适地路径。

缺点：造成相应缓慢。

### 离线和在线两者在周期性调度和实时调度中的区别



### 大概结构

VBVP

- 单路径分时隙贪心预留策略
- 多路径分时隙贪心预留策略
- 多路径全时隙LP预留策略
- 多路径分时隙LP预留策略



### 对流量去做整形









在线算法效果接近离线的方法

Lp、预知当前请求时间范围内的网络状态（不可能）、根据已知的网络状态（未完成的请求在网络中预留的带宽）计算、适当的选择不紧急的预留流量（旧暂未完成请求的）一起加入新的lp中去重新计算



https://blog.csdn.net/u011470552/article/details/78282536

 

路径是和网络拓扑绑定的，修改拓扑的同时也可能会修改路径，为请求分配路径从拓扑实例中去拿。所以将计算路径的逻辑放到修改拓扑中去。



- 说过这周吃饭，然后我问一点点地说，终于是问出来没法吃了。我想知道你是怎么想的。本来就不想吃，然后也懒得说，想着就稀里糊涂糊弄过去吗。然后回答个是，也就只字不提吃饭的事了。你的经典作风。我想咨询一下，这种情况你是怎么思考的。就是暗示我别再说这些事了是吗。
- 跟你说话现在就是，比较吃力。倒是问啥回啥，你只关心你自己的东西。你说是不。没事说开了就很正常，你以前就总是这，还怪我不相信你，你总这样暗示我，我不明白你的意思不是很正常的。你其实也应该不太愿意理我，你不好意思理我，但是感觉偶尔你又给糖，我又感觉良好了。是我把太多东西当成糖了。
- 我跟你确实是不合适，先不说喜好相反。都在一个地方上班也是不能走到一块的。我给不了你想要的还要自己受苦。虽然没有怎么在一起过，我还是不要脸的想说下，我放下你了，不是因为地点，因为形状不匹配我就不再白费力气了。
- 感觉一般也就是遇到一个能包容自己的人。但是我觉得起码，多少能把自己的不足暴露出来点，然后才能去理解和包容。我有很多缺点我不否认，我为了对方我也会尽量克制，因为我不想让对方不高兴。
- 想跟你说点心里话吧。反正我之前总是想找你。回看下之前的状态就是，我想表现对你的态度但是可能能力不足吧也就那，然后你就偶尔吧回应下，然后我接着从。
- 我是不是感觉有点神经质。就想的特别多，之前你的所有行为我都琢磨。有的给我动力，有的又让我打退堂鼓，我就一直在猜你的想法，因为你基本上也不透露你的想法。

### 专利

#### 实例

- 网络
  - 3个节点
  - 3个链路
  - 
- 请求
  - 5个请求
- 结果
  - 最易完成单路径
    - 0：[2]{0-1:**7**} [3]{0-1:**10** 0-2-1:**1**}
    - 1：[3]{1-2:9} [4]{1-2:10 1-0-2:10} [5]{1-2:10 1-0-2:10} [6]{1-2:10 1-0-2:10} [7]{1-2:10 1-0-2:1}
    - 2：[0]{0-2:10 0-1-2:10} [1]{0-2:8}
    - 3：[1]{0-1:8}
    - 4：[1]{1-2:10 1-0-2:2} [2]{1-2:10 1-0-2:3}
  - 最易完成多路径
    - 0：[2]{0-1:6 0-2-1:1} [3]{0-1:8 0-2-1:3}
    - 1：[3]{1-2:7 1-0-2:2} [4]{1-2:9 1-0-2:9} [5]{1-2:9 1-0-2:9} [6]{1-2:9 1-0-2:9} [7]{1-2:9 1-0-2:8}
    - 2：[0]{0-2:7 0-1-2:7} [1]{0-2:7 0-1-2:7}
    - 3：[1]{0-1:6}
    - 4：[0]{1-2:3 1-0-2:3} [1]{1-2:3 1-0-2:3} [2]{1-2:9 1-0-2:4}
  - 全时隙LP
    - 0：[3]{0-1:8} [4]{0-1:10}
    - 1：[1]{1-0-2:4} [2]{1-2:5} [3]{1-2:10 1-0-2:2} [4]{1-2:10} [5]{1-2:10 1-0-2:9} [6]{1-2:10} [7]{1-2:10} [8]{1-2:10}
    - 2：[0]{0-2:10} [1]{0-2:6} [2]{0-2:10} [3]{0-2:2}
    - 3：[1]{0-1:6} [2]{0-1:10}
    - 4：[0]{1-2:10} [1]{1-2:10} [2]{1-2:5}



## 简历



Xiaoyang Zhang received the M.S. degree in Communication and Information Systems from Northwest
University of China in 2019 and the B.S. degree in
Electronic Science and Technology from Xi’an University of Posts and Telecommunications of China
in 2013. His research interests include bandwidth
scheduling, high-performance networks, and big data
management.



Dawei Quan received the M.S. degree in Software Engineering from Northwest University of China in 2021 and the B.S. degree in Software Engineering from Northwest University of  China in 2018.His research interests include bandwidth scheduling, high-performance networks.



### 毕设思路

整体约束：周期性调度、VBVP

评价指标：成功率、数据预留率

- 成功率
  - （成功满足的请求数量）/（总请求数量）
- 数据预留率
  - （请求允许被预留的数据量）/（所有请求需求数据量之和）



请求类型：

- 灵活截止时间约束的带宽预留请求
- FD-BRR

问题定义：

- 灵活带宽调度
  - 通过一些方式，避免请求永远无法得到满足，越是离灵活截止时间越远，越是会被优先分配资源。



- 全时隙优先完成算法

  - 根据请求需要传输的数据量/传输时间范围由小到大排序。依次计算

- 分时隙动态优先级算法

  - 相比于普通VBVP

    当单个请求过大时，吞吐量更大，但是完成率更低

    当单个请求不大时，吞吐量更大，同时完成率基本相同2

  - 如果成功率优先，则优先级的设置为

  - 相比于纯周期性调度的批处理，此方法可以减小调度粒度，同时尽量保证结果的质量

  - 优先级更新

  - **单时隙动最少剩余态优先级周期性调度算法**

    - （single slot dynamic priority periodic schedule，SSDPVBVP）
    - 利用周期性调度额外的信息，如果一个请求的在t、t+1两个时隙都可以传输，那么可以根据两个时隙的繁忙程度来改变两个时隙中请求的权重

  - **单时隙动态优先级即时调度算法**

    - 相比于离线场景，每个时隙少了很多信息，所以考虑的情况会少一些。

- 线性规划

  - 成功率有所下降，总的数据传输率、吞吐量提升，计算时间增加
  - 全时隙线性规划
    - 将多路径多时隙全部转换成线性规划方程来求解
  - 分时隙LP动态优先级算法
    - 针对每一个时隙转为方程求解，减少了计算时间。
    - **分时隙LP动态优先级周期性调度算法**
    - **分时隙LP动态优先级即时调度算法**



#### 未来可能的考虑

- 网路不拥堵时
- 跳数限制
- 带宽限制
- 预留固定带宽
- 定义路径之间的交错程度
- 减少路径，降低路径的跳数，优化k路径
  - 删除最差的链路，对比和其他k路径算法 
  - 降低选过的链路的带宽，也就是降低走过的路的权重，但不是不能再走了
- 如果是针对需要得是否能第一次就传输完成，怎么优化
- **在离线情况下，怎么能让动态优先级策略利用上离线的优势。**
- **单时隙方法中，某些请求不参与LP，比如到截止时间比较远的请求。**

### 可能用的语句

- 线性规划方法不只是去最大化在截止时间前完成传输的数量，因为此时全有或者全无的属性是难以在线性约束中去捕获的，但是其结果和最大化截止时间前完成传输的数量和数据数据传输率的结果是接近的。

- **Applying solutions for intra-DC to inter-DC are insuffifi-**

  **cient to ensure high WAN utilization.** The bandwidth guar

  antee provided by virtual network abstractions [2, 6, 23], such

  as the hose model, supports transfer deadlines by guarantee

  ing minimum bandwidth. However, when applied to inter-DC

  WAN, they are insuffificient to fully utilize the WAN band

  width. The reason is that these pre-determined bandwidth

  reservation models (either static [2, 6] or time-varying [23])

  are less flflexible than the deadline based reservation. They

  provide fifixed bandwidth guarantees over time while our de

  sign focuses on guaranteeing the total transfer volume given a

  deadline. Their models place a more stringent requirement at

  the admission time, while our model is more flflexible because

  the bandwidth allocation can change over time as long as

  the total volume is delivered within the time limit. In our

  evaluation (§8.3), we fifind that pre-determined bandwidth

  reservations under-utilize the WAN resources, leaving many

  transfer requests unsatisfified.

- 



- 1：11111
- 2：111111
- 3：11
- 4：111111
- 5：11111111
- 6：1111
- 7：1
- 8：1111
- 9：111111



- 观察型、给予型、浪漫型、调停型

#### 实验

- 12节点，20带宽，30个请求，10个时隙，需求基数为6

  - 普通

    - 平均完成率：57.2833
    - 平均吞吐率：42.0812

  - 时变优先级

    - ```
      priority = - (demand - meetDemand) / ( (double)(curTimeSlot - readySlot + 1)/(deadline - readySlot + 1) ) ;
      ```

    - 平均完成率：56.4300

    - 平均吞吐率：62.0574

    - 平均吞吐量：515



- 离线、全时隙
  - 平均完成率：56.97
  - 平均数据传输率为：43.23
  - 平均吞吐量：2191
- 在线、全时隙
  - 平均完成率：41.98
  - 平均数据传输率为：49.99
  - 平均吞吐量：2546
- 离线、分时隙
  - 平均完成率：66.54
  - 平均数据传输率为：53.14
  - 平均吞吐量：2703
- 在线、分时隙
  - 平均完成率：66.13
  - 平均数据传输率为：53.20
  - 平均吞吐量：2727
- 离线、全时隙、LP
  - 平均完成率：66.27
  - 平均数据传输率为：68.97
  - 平均吞吐量：3527
- 离线、分时隙、LP
  - 
- 在线、分时隙、LP
  - 平均完成率：60.06
  - 平均数据传输率为：64.24
  - 平均吞吐量：3250







### 每时隙计算方法





## 秋招准备

找互联网公司

- **项目**
  - 平时科研项目或者比赛项目
    - 整体项目介绍，自己做的部分
    - 有挑战、困难的部分，怎么解决
- **算法题**
  - leetcode：热门 200题以上
- **基础知识**
  - 操作系统
  - 计算机网络
- **编程语言**
  - Java
    - Java基础语法
    - 并发
    - JVM
    - IO
      - BIO、NIO
- **数据结构**
  - Java
    - 各种集合类的源码
      - 单线程和并发
    - BitMap
    - 布隆过滤器
    - 。。。
- 设计模式
  - 单例
  - 模板
  - 工厂
  - 代理
  - 。。。
- 相关技术栈
  - 开发框架
    - Spring、SpringMVC、SpringBoot
    - SpringCloud
  - 持久层框架
    - MyBatis / JPA
  - 消息队列
    - Kafka
  - 数据库
    - **关系型数据库**
      - MySQL
        - SQL
        - 原理
    - NoSQL
      - Redis
        - 常用数据类型的操作和实现原理
        - 持久化
        - 主从、哨兵
        - 使用场景，常见问题解决方法
          - 缓存、分布式锁等
  - Linux
    - 基本命令
      - 查日志



## 解决问题适不适合用机器学习

思考下面的五个问题

### is this A or B



### is this weird



### How much or How many



### 

